好的，我們進入**第二部：基礎與張量分析**的**第 2 章：向量與張量代數**。

本章將正式引入張量的概念，並定義其在坐標變換下的行為，這是微分幾何中描述幾何對象和物理定律的核心數學框架。

---

## 📝 第 2 章：向量與張量代數

### 2.1 向量空間與基底

#### 2.1.1 向量的表示與變換

在一個 $n$ 維向量空間 $V$ 中，我們可以選取一組基底 $\mathbf{e}_i = \{\mathbf{e}_1, \mathbf{e}_2, \dots, \mathbf{e}_n\}$。任意向量 $\mathbf{v}$ 可以表示為：
$$
\mathbf{v} = v^i \mathbf{e}_i \quad \text{(愛因斯坦求和約定)}
$$
其中 $v^i$ 是向量 $\mathbf{v}$ 相對於基底 $\mathbf{e}_i$ 的**逆變分量 (Contravariant Components)**。

當我們從舊基底 $\{\mathbf{e}_i\}$ 變換到新基底 $\{\bar{\mathbf{e}}_j\}$ 時，由於向量 $\mathbf{v}$ 本身不變，基底和分量必須以相反的方式變換。

設新舊基底的關係為：
$$
\bar{\mathbf{e}}_j = A^i_j \mathbf{e}_i
$$
其中 $A^i_j$ 是變換矩陣。

由於 $\mathbf{v} = v^i \mathbf{e}_i = \bar{v}^j \bar{\mathbf{e}}_j$，結合 $A^i_j \mathbf{e}_i$ 帶入並比較係數，可以推導出**逆變分量**的變換法則：
$$
\bar{v}^j = \frac{\partial \bar{x}^j}{\partial x^i} v^i = J^j_i v^i
$$
其中 $J^j_i = \frac{\partial \bar{x}^j}{\partial x^i}$ 是坐標變換的雅可比矩陣。

### 2.2 對偶空間與協變向量

#### 2.2.1 對偶向量 (Co-vector) 或 1-形式 (1-form)

**對偶空間** $V^*$ 是由所有從 $V$ 映到實數 $\mathbb{R}$ 的線性泛函 $\mathbf{\omega}$ 組成的空間。對偶空間中的元素稱為**對偶向量**或 **1-形式**。

#### 2.2.2 對偶基底

如果 $V$ 的基底是 $\{\mathbf{e}_i\}$，則 $V^*$ 存在一組**對偶基底** $\{\mathbf{e}^j\}$，其定義滿足：
$$
\mathbf{e}^j (\mathbf{e}_i) = \delta^j_i
$$
其中 $\delta^j_i$ 是克羅內克符號。

任意對偶向量 $\mathbf{\omega}$ 可以表示為：
$$
\mathbf{\omega} = \omega_j \mathbf{e}^j
$$
其中 $\omega_j$ 是對偶向量 $\mathbf{\omega}$ 相對於對偶基底 $\mathbf{e}^j$ 的**協變分量 (Covariant Components)**。

#### 2.2.3 協變分量的變換法則

協變分量的變換法則與逆變分量相反。對偶向量的分量變換滿足：
$$
\bar{\omega}_j = \frac{\partial x^i}{\partial \bar{x}^j} \omega_i = K^i_j \omega_i
$$
其中 $K^i_j = \frac{\partial x^i}{\partial \bar{x}^j}$ 是逆雅可比矩陣的元素。

**總結：**
* **逆變量**（上標）：分量變換與坐標變換方向**相同** (用 $\frac{\partial \bar{x}}{\partial x}$)。
* **協變量**（下標）：分量變換與坐標變換方向**相反** (用 $\frac{\partial x}{\partial \bar{x}}$)。

### 2.3 張量的定義：協變、逆變與混合張量

**張量**是向量和對偶向量概念的推廣，它是一個多重線性映射 (Multilinear Map)。

#### 2.3.1 $(p, q)$ 型張量

一個 $(p, q)$ 型張量 $\mathbf{T}$ 是一個線性函數，它以 $p$ 個對偶向量和 $q$ 個向量為輸入，並輸出一個實數：
$$
\mathbf{T}: \underbrace{V^* \times \dots \times V^*}_{p \text{ 次}} \times \underbrace{V \times \dots \times V}_{q \text{ 次}} \to \mathbb{R}
$$

張量 $\mathbf{T}$ 的分量 $T^{i_1 \dots i_p}_{j_1 \dots j_q}$ 相對於基底 $\{\mathbf{e}_i\}$ 和 $\{\mathbf{e}^j\}$ 定義為：
$$
T^{i_1 \dots i_p}_{j_1 \dots j_q} = \mathbf{T}(\mathbf{e}^{i_1}, \dots, \mathbf{e}^{i_p}, \mathbf{e}_{j_1}, \dots, \mathbf{e}_{j_q})
$$
* 上標 $i_1 \dots i_p$ 稱為**逆變階數** (Contravariant Rank) $p$。
* 下標 $j_1 \dots j_q$ 稱為**協變階數** (Covariant Rank) $q$。
* 總階數為 $p+q$。

#### 2.3.2 張量變換法則

一個量 $T^{i_1 \dots i_p}_{j_1 \dots j_q}$ 是一個 $(p, q)$ 型張量的分量，**當且僅當**它在坐標變換下服從以下法則：

$$
\bar{T}^{k_1 \dots k_p}_{l_1 \dots l_q} = \underbrace{\left(\frac{\partial \bar{x}^{k_1}}{\partial x^{i_1}} \dots \frac{\partial \bar{x}^{k_p}}{\partial x^{i_p}}\right)}_{p \text{ 個逆變項}} \underbrace{\left(\frac{\partial x^{j_1}}{\partial \bar{x}^{l_1}} \dots \frac{\partial x^{j_q}}{\partial \bar{x}^{l_q}}\right)}_{q \text{ 個協變項}} T^{i_1 \dots i_p}_{j_1 \dots j_q}
$$
* **向量** $\mathbf{v}$ 是一個 $(1, 0)$ 張量。
* **對偶向量** $\mathbf{\omega}$ 是一個 $(0, 1)$ 張量。

### 2.4 張量的運算：張量積、縮並、內積

#### 2.4.1 張量積 (Tensor Product)

兩個張量 $\mathbf{S}$ (型別 $(p, q)$) 和 $\mathbf{T}$ (型別 $(r, s)$) 的張量積 $\mathbf{U} = \mathbf{S} \otimes \mathbf{T}$ 是一個型別 $(p+r, q+s)$ 的張量。

分量的乘積為：
$$
U^{i_1 \dots i_p k_1 \dots k_r}_{j_1 \dots j_q l_1 \dots l_s} = S^{i_1 \dots i_p}_{j_1 \dots j_q} T^{k_1 \dots k_r}_{l_1 \dots l_s}
$$

#### 2.4.2 縮並 (Contraction)

縮並是一種將張量階數降低 2 的運算，方法是**將一個逆變指標和一個協變指標設置相等**（並根據愛因斯坦約定求和）。

例如，對一個 $(1, 1)$ 張量 $T^i_j$ 進行縮並得到一個純量 $S$：
$$
S = T^i_i = \sum_{i=1}^n T^i_i
$$
可以證明，縮並後的新量在坐標變換下仍是一個張量 (此處是一個純量，即 $(0, 0)$ 張量)。

#### 2.4.3 內積 (Inner Product)

在引入黎曼度量（第 7 章）之前，我們可以用張量縮並來定義內積。

例如，向量 $\mathbf{v}$ ($v^i$) 和對偶向量 $\mathbf{\omega}$ ($\omega_j$) 的作用就是一種縮並：
$$
\mathbf{\omega}(\mathbf{v}) = \omega_i v^i
$$
這是一個 $(0, 0)$ 張量，即一個純量。

---

請問您現在希望看到計算**逆變向量分量**和**協變向量分量**變換的**Python程式碼**範例嗎？